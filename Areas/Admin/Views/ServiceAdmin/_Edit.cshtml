@model BTL.Models.Service
@{
    var categories = ViewBag.Categories as List<BTL.Models.Category>;
}

<div class="modal-header bg-primary text-white">
    <h5 class="modal-title">Chỉnh sửa Dịch vụ</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
</div>

<div class="modal-body">
    <form id="formEditService"
          asp-action="Edit"
          asp-controller="ServiceAdmin"
          asp-area="Admin"
          method="post"
          enctype="multipart/form-data">

        <!-- Hidden -->
        <input type="hidden" asp-for="ItemID" />

        <div class="mb-3">
            <label asp-for="ItemName" class="form-label fw-semibold">Tên dịch vụ *</label>
            <input asp-for="ItemName" class="form-control" required />
            <span asp-validation-for="ItemName" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label asp-for="Description" class="form-label fw-semibold">Mô tả</label>
            <textarea asp-for="Description" class="form-control" rows="3"></textarea>
        </div>

        <div class="mb-3">
            <label asp-for="CategoryID" class="form-label fw-semibold">Danh mục *</label>
            <select asp-for="CategoryID" class="form-select" required>
                <option value="">-- Chọn danh mục --</option>
                @foreach (var c in categories)
                {
                    <option value="@c.CategoryID" selected="@(Model.CategoryID == c.CategoryID)">
                        @c.CategoryName
                    </option>
                }
            </select>
        </div>

        <div class="mb-3">
            <label asp-for="Address" class="form-label fw-semibold">Địa chỉ *</label>
            <input asp-for="Address" class="form-control" required />
            <span asp-validation-for="Address" class="text-danger"></span>
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">Ảnh hiện tại</label><br />
            <img src="@($"/images/Data/{Model.ImageUrl}")"
                 alt="Ảnh hiện tại"
                 style="width:100px;height:100px;object-fit:cover;border-radius:8px;border:1px solid #ccc;" />
        </div>

        <div class="mb-3">
            <label class="form-label fw-semibold">Ảnh mới (nếu muốn thay)</label>
            <input type="file" name="image" class="form-control" accept="image/*" />
            <small class="text-muted">Bỏ trống nếu không muốn thay đổi ảnh</small>
        </div>

        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
            <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
